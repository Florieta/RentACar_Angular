@if (isLoading) {
<app-loader />
}@else{<div class="container">
  <h2>Add a Car</h2>
  <form #carForm="ngForm" (ngSubmit)="submitCar(carForm)">
    <div class="form-group">
      <label for="make">Make</label>
      <input type="text" id="make" class="form-control" [(ngModel)]="formValues.make" #make="ngModel" name="make"
        required minlength="2" maxlength="20" />
      @if(make.invalid && make.touched){
      <small style="color: red">
        Make is required (2-20 characters).
      </small>
      }
    </div>

    <div class="form-group">
      <label for="model">Model</label>
      <input type="text" id="model" class="form-control" [(ngModel)]="formValues.model" #model="ngModel" name="model"
        required minlength="2" maxlength="20" />
      @if(model.invalid && model.touched){
      <small style="color: red">
        Model is required (2-20 characters).
      </small>
      }
    </div>

    <div class="form-group">
      <label for="regNumber">Registration Number</label>
      <input type="text" id="regNumber" class="form-control" [(ngModel)]="formValues.regNumber" #regNumber="ngModel"
        name="regNumber" required minlength="5" maxlength="10" />
      @if(regNumber.invalid && regNumber.touched){
      <small style="color: red">
        Registration number is required (5-10 characters).
      </small>
      }
    </div>

    <div class="form-group">
      <label for="makeYear">Make Year</label>
      <input type="number" id="makeYear" class="form-control" [(ngModel)]="formValues.makeYear" #year="ngModel"
        name="makeYear" placeholder=" " min=1886 yearrequired />
      @if(year.invalid && year.touched){
      @if(year.errors?.['required']){
      <small style="color: red">
        Year is required.
      </small>
      }
      @if(year.errors?.['min']){
      <small style="color: red">
        Year cannot be earlier than 1886.
      </small>
      }
      }
    </div>

    <div class="form-group">
      <label for="seats">Seats</label>
      <input type="number" id="seats" class="form-control" [(ngModel)]="formValues.seats" #seats="ngModel" name="seats"
        required />
      @if(seats.invalid && seats.touched){
      <small style="color: red">
        Seats number is required.
      </small>
      }
    </div>

    <div class="form-group">
      <label for="doors">Doors</label>
      <input type="number" id="doors" class="form-control" [(ngModel)]="formValues.doors" #doors="ngModel" name="doors"
        required />
      @if(doors.invalid && doors.touched){
      <small style="color: red">
        Doors number is required.
      </small>
      }
    </div>

    <div class="form-group">
      <label for="fuel">Fuel</label>
      <select id="fuel" class="form-control" [(ngModel)]="formValues.fuel" #fuel="ngModel" name="fuel" required>
        <option value="Diesel">Diesel</option>
        <option value="Petrol">Petrol</option>
        <option value="LPG">LPG</option>
        <option value="Hybrid">Hybrid</option>
        <option value="Electric">Electric</option>
      </select>
      @if(fuel.invalid && fuel.touched){
      <small style="color: red">
        Fuel is required.
      </small>
      }
    </div>

    <div class="form-group">
      <label for="transmission">Transmission</label>
      <select id="transmission" class="form-control" [(ngModel)]="formValues.transmission" name="transmission" required>
        <option value="Automatic">Automatic</option>
        <option value="Manual">Manual</option>
      </select>
    </div>

    <div class="form-group">
      <label for="airCondition">Air Conditioning</label>
      <input type="checkbox" id="airCondition" [(ngModel)]="formValues.airCondition" name="airCondition" />
    </div>

    <div class="form-group">
      <label for="navigationSystem">Navigation System</label>
      <input type="checkbox" id="navigationSystem" [(ngModel)]="formValues.navigationSystem" name="navigationSystem" />
    </div>

    <div class="form-group">
      <label for="dailyRate">Daily Rate</label>
      <input type="number" id="dailyRate" class="form-control" [(ngModel)]="formValues.dailyRate" name="dailyRate"
        required />
    </div>

    <div class="form-group">
      <label for="imageUrl">Car Image</label>
      <input type="file" id="imageUrl" (change)="onFileChange($event)" class="form-control" />
    </div>

    <div class="form-group">
      <label for="categoryId">Category</label>
      <select id="categoryId" name="categoryId" class="form-control" [(ngModel)]="formValues.categoryId" required>
        <option value="" disabled>Select a Category</option>
        @for (category of categories; track $index) {
        <option [value]="category.id">
          {{ category.categoryName }}
        </option>
        }
      </select>
    </div>
    <div class="form-group">
      <button type="submit" class="form-button" [disabled]="carForm.invalid">
        Submit
      </button>
    </div>
  </form>
</div>
}